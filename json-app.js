JSONViewer=function(){var e=function(){this._dom={},this._dom.container=document.createElement("pre"),this._dom.container.classList.add("json-viewer")};return e.prototype.showJSON=function(e,t,n){t="number"==typeof t?t:-1,n="number"==typeof n?n:-1;var i=this._processInput(e),a=this._walk(i,t,n,0);this._dom.container.innerHTML="",this._dom.container.appendChild(a)},e.prototype.getContainer=function(){return this._dom.container},e.prototype._processInput=function(e){if(e&&"object"==typeof e)return e;throw"Input value is not object or array!"},e.prototype._walk=function(e,t,n,i){var a=document.createDocumentFragment(),o=t>=0&&i>=t,l=n>=0&&i>=n;switch(typeof e){case"object":if(e){var s=Array.isArray(e),d=s?e:Object.keys(e);if(0===i){var r=this._createItemsCount(d.length),c=this._createLink(s?"[":"{");d.length?(c.addEventListener("click",function(){o||(c.classList.toggle("collapsed"),r.classList.toggle("hide"),this._dom.container.querySelector("ul").classList.toggle("hide"))}.bind(this)),l&&(c.classList.add("collapsed"),r.classList.remove("hide"))):c.classList.add("empty"),c.appendChild(r),a.appendChild(c)}if(d.length&&!o){var p=d.length-1,u=document.createElement("ul");u.setAttribute("data-level",i),u.classList.add("type-"+(s?"array":"object")),d.forEach(function(a,o){var l=s?a:e[a],d=document.createElement("li");if("object"==typeof l){if(!l||l instanceof Date)d.appendChild(document.createTextNode(s?"":a+": ")),d.appendChild(this._createSimple(l||null));else{var r=Array.isArray(l),c=r?l.length:Object.keys(l).length;if(c){var h=("string"==typeof a?a+": ":"")+(r?"[":"{"),m=this._createLink(h),f=this._createItemsCount(c);t>=0&&i+1>=t?d.appendChild(document.createTextNode(h)):(m.appendChild(f),d.appendChild(m)),d.appendChild(this._walk(l,t,n,i+1)),d.appendChild(document.createTextNode(r?"]":"}"));var y=d.querySelector("ul"),v=function(){m.classList.toggle("collapsed"),f.classList.toggle("hide"),y.classList.toggle("hide")};m.addEventListener("click",v),n>=0&&i+1>=n&&v()}else d.appendChild(document.createTextNode(a+": "+(r?"[]":"{}")))}}else s||d.appendChild(document.createTextNode(a+": ")),d.appendChild(this._walk(l,t,n,i+1));o<p&&d.appendChild(document.createTextNode(",")),u.appendChild(d)},this),a.appendChild(u)}else if(d.length&&o){(h=this._createItemsCount(d.length)).classList.remove("hide"),a.appendChild(h)}if(0===i){var h;if(!d.length)(h=this._createItemsCount(0)).classList.remove("hide"),a.appendChild(h);a.appendChild(document.createTextNode(s?"]":"}")),l&&a.querySelector("ul").classList.add("hide")}break}default:a.appendChild(this._createSimple(e))}return a},e.prototype._createSimple=function(e){var t=document.createElement("span"),n=typeof e,i=e;return"string"===n?i='"'+e+'"':null===e?(n="null",i="null"):void 0===e?i="undefined":e instanceof Date&&(n="date",i=e.toString()),t.classList.add("type-"+n),t.innerHTML=i,t},e.prototype._createItemsCount=function(e){var t=document.createElement("span");return t.classList.add("items-ph"),t.classList.add("hide"),t.innerHTML=this._getItemsTitle(e),t},e.prototype._createLink=function(e){var t=document.createElement("a");return t.classList.add("list-link"),t.href="javascript:void(0)",t.innerHTML=e||"",t},e.prototype._getItemsTitle=function(e){return e+" "+(e>1||0===e?"items":"item")},e}();var jsonObj={},jsonViewer=new JSONViewer;document.querySelector("#json").appendChild(jsonViewer.getContainer());var textarea=document.querySelector("textarea");textarea.value=JSON.stringify({menu:{header:"JSON Beautifier",items:[{url:"https://fendiali.net/p/json-beautify.html"},{id:"Load"},{id:"LoadJson",label:"Load JSON"},null,{id:"ResetJson",label:"Reset JSON"},{id:"Collapse",label:"Collapse"},{id:"Expand",label:"Expand"},null,{id:"Find",label:"Find..."},{id:"FindAgain",label:"Find Again"},{id:"Copy"},{id:"CopyAgain",label:"Copy Again"},{id:"CopyJSON",label:"Copy JSON"},{id:"ViewJSON",label:"View JSON"},{id:"ViewSource",label:"View Source"},{id:"SaveAs",label:"Save As"},null,{id:"Help"},{id:"About",label:"About JSON Beautifier..."}]}});var setJSON=function(){try{var e=textarea.value;jsonObj=JSON.parse(e)}catch(e){alert(e)}};setJSON();var loadJsonBtn=document.querySelector("button.load-json"),collapseBtn=document.querySelector("button.collapse"),expandBtn=document.querySelector("button.expand"),resetBtn=document.querySelector("button.reset");loadJsonBtn.addEventListener("click",function(){setJSON(),jsonViewer.showJSON(jsonObj)}),collapseBtn.addEventListener("click",function(){jsonViewer.showJSON(jsonObj,null,1)}),expandBtn.addEventListener("click",function(){setJSON(),jsonViewer.showJSON(jsonObj)}),resetBtn.addEventListener("click",function(){document.getElementById("msg").value=""});
